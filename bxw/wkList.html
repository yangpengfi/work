<!DOCTYPE html>
<html>
<head lang="en">
    <title> 同步知识点微课 </title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="page-view-size" content="1280*720">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <link rel="stylesheet" href="css/ntv.css">
    <link rel="stylesheet" href="css/base.css">
</head>
<body>
<div class="container pos-abs">
    <div id="header">
        <img src="img/index/screening.png" alt="1" style="vertical-align:middle;" data-type="0">
        <span style="font-size: 24px;color:#f3f8fd;margin-left: 20px;" id="textCont" data-grade="9">初三</span>
    </div>
    <span id="title">同步知识点微课</span>
    <ul id="asideList">
        <li data-id="1" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="11" data-type="1" data-key="1">
            <p class="subjectName">语文</p>
        </li>
        <li data-id="2" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="21" data-type="1" data-key="2">
            <p  class="subjectName">数学</p>
        </li>
        <li data-id="3" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="31" data-type="1" data-key="3">
            <p  class="subjectName">英语</p>
        </li>
        <li data-id="4" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="41" data-type="1" data-key="4">
            <p class="subjectName">物理</p>
        </li>
        <li data-id="5" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="51" data-type="1" data-key="5">
            <p class="subjectName">化学</p>
        </li>
        <li data-id="6" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="61" data-type="1" data-key="6">
            <p class="subjectName">地理</p>
        </li>
        <li data-id="7" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="71" data-type="1" data-key="7">
            <p class="subjectName">历史</p>
        </li>
        <li data-id="8" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="81" data-type="1" data-key="8">
            <p class="subjectName">政治</p>
        </li>
        <li data-id="9" data-gradeid="12" data-versionid="0">
            <img src="img/sideList.png" alt="91" data-type="1" data-key="9">
            <p class="subjectName">生物</p>
        </li>
        <li>
            <img src="img/sideList.png" alt="101" data-type="1" data-key="10">
            <p class="subjectName">生物</p>
        </li>
    </ul>
    <div id="centerList">
        <ul>
            <li>
                <img src="img/smallAct.png" alt="12" data-type="2"><p>2014年《考试说明》解读</p><img src="img/index/sub_chinesesmall.png">
            </li>
            <li>
                <img src="img/smallAct.png" alt="13" data-type="2">
                <p>“考前与考中”策略</p><img src="img/index/sub_chinesesmall.png">
            </li>
            <li>
                <img src="img/smallAct.png" alt="14" data-type="2"><p>传记阅读</p><img src="img/index/sub_chinesesmall.png">
            </li>
            <li>
                <img src="img/smallAct.png" alt="15" data-type="2"><p>作文</p><img src="img/index/sub_chinesesmall.png">
            </li>
            <li>
                <img src="img/smallAct.png" alt="16" data-type="2">
                <p>作文命题的开放与限制——考场作文审题构思分类指导</p><img src="img/index/sub_chinesesmall.png">
            </li>
            <li>
                <img src="img/smallAct.png" alt="17" data-type="2">
                <p>作文命题的开放与限制——考场作文审题构思分类指导</p><img src="img/index/sub_chinesesmall.png">
            </li>
            <li>
                <img src="img/smallAct.png" alt="18" data-type="2"><p>作文登顶攀“六阶”</p><img src="img/index/sub_chinesesmall.png">
            </li>
            <li>
                <img src="img/smallAct.png" alt="19" data-type="2"><p>写作</p><img src="img/index/sub_chinesesmall.png">
            </li>
        </ul>
    </div>
    <div id="pageBar">
        <span style="position:absolute;left:10px;top:-5px;" id="currPage">1</span>/
        <span style="font-size:18px;position:absolute;left:50px;top:15px;" id="totalPage">1</span>
    </div>
    <div id="footer">
        <ul>
            <li>小学 <span>|</span></li>
            <li>
                <img src="img/footer.png" data-grade="1" alt="131" data-type="3">
                一年级
            </li>
            <li>
                <img src="img/footer.png" data-grade="2" alt="132" data-type="3">
                二年级
            </li>
            <li>
                <img src="img/footer.png" data-grade="3" alt="133" data-type="3">
                三年级
            </li>
            <li>
                <img src="img/footer.png" data-grade="4" alt="134" data-type="3">
                四年级
            </li>
            <li>
                <img src="img/footer.png" data-grade="5" alt="135" data-type="3">
                五年级
            </li>
            <li>
                <img src="img/footer.png" data-grade="6" alt="136" data-type="3">
                六年级
            </li>
        </ul>
        <ul>
            <li>初中 <span>|</span></li>
            <li>
                <img src="img/footer.png" data-grade="7" alt="141" data-type="3">
                初一
            </li>
            <li>
                <img src="img/footer.png" data-grade="8" alt="142" data-type="3">
                初二
            </li>
            <li>
                <img src="img/footer.png" data-grade="9" alt="143" data-type="3">
                初三
            </li>
        </ul>
        <ul>
            <li>高中 <span>|</span></li>
            <li>
                <img src="img/footer.png" data-grade="10" alt="151" data-type="3">
                高一
            </li>
            <li>
                <img src="img/footer.png" data-grade="11" alt="152" data-type="3">
                高二
            </li>
            <li>
                <img src="img/footer.png" data-grade="12" alt="153" data-type="3">
                高三
            </li>
        </ul>
    </div>
</div>
<script type="text/javascript" src="js/jquery-1.11.3.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/config.js"></script>
<script type="text/javascript">
    /**
     * clickType：0:头部点击事件，1：左侧点击事件，2：中间点击事件，3：footer点击事件
     * */
    var FocusType=1;
    var focusEle=ntv.navigation.getElmByCoord(11);
    (function(){
        var params={
            token:token
        };
        getData(params,'/app/microcourse/a/getUserData.do',function(msg){
            //console.log(msg);
            sessionStorage.setItem('gradeId',msg.data.gradeId);
            var paramData={
                token:token,
                gradeId:msg.data.gradeId
            };
            getData(paramData,'/app/microcourse/a/getSubjectList4Tv.do',setLeftList);
            banxue('#textCont').text(banxue('#footer img[data-grade='+msg.data.gradeId+']').parent().text()).attr("data-grade",msg.data.gradeId);
            sessionStorage.setItem("subjectId",1);
        })
        banxue(focusEle).parent().attr("style","color:#00b2ed").siblings().removeAttr("style");
    })();

    function pressOkFun(){
        switch (FocusType){
            case '0':
                headerClick();
                ntv.navigation.move_focus(131);
                break;
            case '1':
                break;
            case '2':
                centerLiClick();
                break;
            case '3':
                footerLiClick();
                break;
            default:

        }
    }
    var set_listen_handle = function(keycode){
        var coord=parseInt(ntv.navigation.coord);
        var currPage=parseInt(banxue("#currPage").text());
        var totalPage=parseInt(banxue("#totalPage").text());
        var code=keycode.code;
        switch(code)
        {
            case "KEY_UP":
                if(FocusType=="2"){
                    coord-=4;
                    if(coord<12&&currPage>1){
                        var autoParams=JSON.parse(sessionStorage.getItem("autoParams"));
                        autoParams.pageIndex-=1;
                        if(autoParams.topicId){
                            getData(autoParams,'/app/microcourse/a/getResourceList.do',setCenterListEls);
                        }else{
                            getData(autoParams,'/app/microcourse/a/getTopicList.do',setCenterList);
                        }
                        sessionStorage.setItem("autoParams",JSON.stringify(autoParams));
                        banxue("#currPage").text(currPage-1);
                        ntv.navigation.move_focus(coord+8);
                    }else if(coord==11){
                        return;
                    }else{
                        ntv.navigation.move_focus(coord);
                    }
                }
                break;
            case "KEY_DOWN":
                if(FocusType=="2"){
                    coord+=4;
                    if(coord>19&&currPage<totalPage){
                        var autoParams=JSON.parse(sessionStorage.getItem("autoParams"));
                        autoParams.pageIndex+=1;
                        if(autoParams.topicId){
                            getData(autoParams,'/app/microcourse/a/getResourceList.do',setCenterListEls);
                        }else{
                            getData(autoParams,'/app/microcourse/a/getTopicList.do',setCenterList);
                        }
                        sessionStorage.setItem("autoParams",JSON.stringify(autoParams));
                        banxue("#currPage").text(currPage+1);
                        ntv.navigation.move_focus(coord-8);
                        if(currPage+1==totalPage){
                            ntv.navigation.move_focus(12);
                        }else{
                            ntv.navigation.move_focus(coord-8);
                        }
                    }else{
                        ntv.navigation.move_focus(coord);
                    }
                }else if(FocusType=="3"){
                    //console.log(coord)
                    if(coord==134||coord==135||coord==136){
                        ntv.navigation.move_focus(141);
                    }
                }
                break;
            case "KEY_RIGHT":
                    if(FocusType=="1"){
                        ntv.navigation.move_focus(12);
                    }
                break;
            case "KEY_OK":
                pressOkFun();
                break;
        }
    };
    function getFocusfunction(coord){
        focusEle=ntv.navigation.getElmByCoord(coord);
        FocusType=focusEle.getAttribute("data-type");
        if(FocusType=='1'){
            var params={
                token:token,
                gradeId:sessionStorage.getItem("gradeId"),
                subjectId:focusEle.getAttribute("data-subjectId"),
                versionId:focusEle.getAttribute("data-versionId"),
                pageSize:8,
                pageIndex:1
            };
            getData(params,'/app/microcourse/a/getTopicList.do',setCenterList);
            sessionStorage.setItem("subjectId",focusEle.getAttribute("data-subjectId"));
            sessionStorage.setItem("autoParams",JSON.stringify(params));
            banxue(focusEle).parent().attr("style","color:#00b2ed").siblings().removeAttr("style");
            banxue("#currPage").text(1);
        }
    };
    (function(){
        ntv.key.keypress_handle = set_listen_handle;
        ntv.navigation.move_done_callback = getFocusfunction;
    })();
</script>
</body>
</html>